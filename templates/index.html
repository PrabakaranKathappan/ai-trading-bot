<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Trading Bot">
    <meta name="description" content="Monitor your Nifty options trading bot">
    <title>AI Trading Bot - Nifty Options</title>
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icon-192.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        rel="stylesheet">
        </head>

        <body>
            <div class="container">
                <!-- Header -->
                <header class="header">
                    <div class="header-content">
                        <h1 class="logo">
                            <span class="logo-icon">ü§ñ</span>
                            AI Trading Bot
                        </h1>
                        <div class="header-status">
                            <span class="status-badge" id="botStatus">Loading...</span>
                            <span class="mode-badge" id="tradingMode">PAPER</span>
                        </div>
                    </div>
                </header>

                <!-- Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- P&L Card -->
                    <div class="card pnl-card">
                        <div class="card-header">
                            <h2>Today's P&L</h2>
                            <span class="refresh-icon" onclick="refreshData()">üîÑ</span>
                        </div>
                        <div class="card-body">
                            <div class="pnl-amount" id="todayPnl">‚Çπ0.00</div>
                            <div class="pnl-stats">
                                <div class="stat">
                                    <span class="stat-label">Capital</span>
                                    <span class="stat-value" id="capital">‚Çπ70,000</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-label">Win Rate</span>
                                    <span class="stat-value" id="winRate">0%</span>
                                    <span class="metric-value" id="openPositions">0 / 3</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Daily Loss Limit</span>
                                    <span class="metric-value" id="dailyLossLimit">‚Çπ0</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Total Exposure</span>
                                    <span class="metric-value" id="totalExposure">‚Çπ0</span>
                                </div>
                                ‚è∏ Pause
                                </button>
                                <button class="btn btn-danger" onclick="squareOffAll()">
                                    ‚èπ Square Off All
                                </button>
                            </div>
                            <!-- Trades Section -->
                            <div class="section">
                                <div class="section-header">
                                    <h2>Today's Trades</h2>
                                    <span class="badge" id="tradeCount">0</span>
                                </div>
                                <div class="trades-container" id="tradesContainer">
                                    <div class="empty-state">No trades today</div>
                                </div>
                            </div>

                            <!-- Performance Stats -->
                            <div class="section">
                                <div class="section-header">
                                    <h2>Performance (Last 30 Days)</h2>
                                </div>
                                <div class="stats-grid">
                                    <div class="stat-card">
                                        <div class="stat-card-label">Total Trades</div>
                                        <div class="stat-card-value" id="totalTrades">0</div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-card-label">Winning Trades</div>
                                        <div class="stat-card-value" id="winningTrades">0</div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-card-label">Avg Win</div>
                                        <div class="stat-card-value" id="avgWin">‚Çπ0</div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-card-label">Avg Loss</div>
                                        <div class="stat-card-value" id="avgLoss">‚Çπ0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- PIN Entry Modal -->
                        <div id="pinModal" class="modal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h2>üîê Enter Access PIN</h2>
                                    <p>Please enter your 6-digit PIN to access the dashboard</p>
                                </div>
                                <div class="pin-input-container">
                                    <input type="password" id="pinInput" maxlength="6" placeholder="Enter PIN"
                                        pattern="[0-9]*" inputmode="numeric">
                                    <button class="btn btn-primary" onclick="submitPin()">Access Dashboard</button>
                                </div>
                                <p id="pinError" class="error-message"></p>
                            </div>
                        </div>

                        <script src="{{ url_for('static', filename='script.js') }}"></script>
        </body>

</html>